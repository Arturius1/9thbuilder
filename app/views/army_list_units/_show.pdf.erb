<table class="army_list_unit">
  <tr>
    <th colspan="11" class="army_list_unit_overview">
      <div class="value_points"><%= value_points army_list_unit.value_points %> <small>points</small></div>

      <strong><%=remove_accents army_list_unit.name %></strong>
      <%= army_list_unit.unit.is_unique ? "<em>Unique</em>".html_safe : army_list_unit.unit.name %>
      • <%= army_list_unit.unit_category.name %>
    </th>
  </tr>
  <tr class="army_list_unit_troops">
    <th class="troop_name">Troupes</th>
    <th class="odd">M</th>
    <th>CC</th>
    <th class="odd">CT</th>
    <th>F</th>
    <th class="odd">E</th>
    <th>PV</th>
    <th class="odd">I</th>
    <th>A</th>
    <th class="odd">Cd</th>
    <th>Type</th>
  </tr>
  <% army_list_unit.army_list_unit_troops.each do |alut| %>
    <tr class="army_list_unit_troops">
      <td class="troop_name"><%= alut.troop.name %> <%= "<em>x#{alut.size}</em>".html_safe if alut.size? && alut.size > 1 %></td>
      <td class="characteristic odd"><%= alut.troop.M %></td>
      <td class="characteristic"><%= alut.troop.WS %></td>
      <td class="characteristic odd"><%= alut.troop.BS %></td>
      <td class="characteristic"><%= alut.troop.S %></td>
      <td class="characteristic odd"><%= alut.troop.T %></td>
      <td class="characteristic"><%= alut.troop.W %></td>
      <td class="characteristic odd"><%= alut.troop.I %></td>
      <td class="characteristic"><%= alut.troop.A %></td>
      <td class="characteristic odd"><%= alut.troop.LD %></td>
      <td class="troop_type"><%= alut.troop.troop_type.try(:name) %></td>
    </tr>
  <% end %>
  <% if army_list_unit.unit.equipments.any? %>
    <tr class="army_list_unit_more">
      <th>Equipements</th>
      <td colspan="10">
        <% army_list_unit.unit.equipments.each_with_index do |equipment, index| %>
          <%= "•" if index > 0 %> <%= equipment.name %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.unit.special_rules.any? %>
    <tr class="army_list_unit_more">
      <th>Règles spéciales</th>
      <td colspan="10">
        <% army_list_unit.unit.special_rules.each_with_index do |special_rule, index| %>
          <%= "•" if index > 0 %> <%= special_rule.name %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.unit_options.any? %>
    <tr class="army_list_unit_more">
      <th>Options</th>
      <td colspan="10">
        <% army_list_unit.unit_options.each_with_index do |option, index| %>
          <%= "• " if index > 0 %> <%= option.name %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.magic_items.any? %>
    <tr class="army_list_unit_more">
      <th>Objets magiques</th>
      <td colspan="10">
        <% army_list_unit.magic_items.each_with_index do |magic_item, index| %>
          <%= "• " if index > 0 %> <%= magic_item.name %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.magic_standards.any? %>
    <tr class="army_list_unit_more">
      <th>Bannière magique</th>
      <td colspan="10">
        <%= army_list_unit.magic_standards.first.name %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.unit.magic? %>
    <tr class="army_list_unit_more">
      <th>Magie</th>
      <td colspan="10">
        <%= army_list_unit.unit.magic %>
      </td>
    </tr>
  <% end %>
  <% if army_list_unit.notes? %>
    <tr class="army_list_unit_more">
      <th>Remarques</th>
      <td colspan="10">
        <%= simple_format army_list_unit.notes %>
      </td>
    </tr>
  <% end %>
</table>
